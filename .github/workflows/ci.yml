  claude-pr-review:
    name: Claude PR Review
    runs-on: ubuntu-latest
    needs: [backend-ci, frontend-ci]
    if: ${{ github.event_name == 'pull_request' }}

    permissions:
      contents: read
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Claude Code Action Official
        uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          github_token: ${{ secrets.GITHUB_TOKEN }}
          prompt: |
            You are a senior engineer reviewing this pull request.
            - Review only the diff introduced in this PR.
            - Identify logic issues, edge cases, and performance concerns.
            - Suggest improved naming, code clarity, and test coverage.
            - Add inline comments when possible.
            - Finish with a short summary and a recommended next step.
